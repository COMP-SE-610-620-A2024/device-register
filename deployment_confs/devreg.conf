<VirtualHost *:80>
    ServerName ens-phot-devreg.rd.tuni.fi

    DocumentRoot /var/www/html
    Alias /app /var/www/html
    <Directory /var/www/html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Load the mod_wsgi module
    LoadModule wsgi_module "/opt/device-register/venv/lib64/python3.12/site-packages/mod_wsgi/server/mod_wsgi-py312.cpython-312-x86_64-linux-gnu.so"

    WSGIDaemonProcess flaskapp python-home=/opt/device-register/venv python-path=/opt/device-register

    WSGIScriptAlias /api /opt/device-register/wsgi.py
    WSGIScriptAlias /apidocs /opt/device-register/wsgi.py

    <Directory /opt/device-register>
        Require all granted
    </Directory>

    Alias /static /opt/device-register/backend/static
    <Directory /opt/device-register/backend/static/>
        Require all granted
    </Directory>

    ErrorLog /var/log/httpd/devreg_error.log
    CustomLog /var/log/httpd/devreg_access.log combined
</VirtualHost>
